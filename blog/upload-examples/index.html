<!DOCTYPE html>
<html lang="ja">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=0">
	<meta http-equiv="Content-Language" content="ja" />
	<meta name="keywords" content="jquery,javascript,css" />
	<meta name="description" content="" />
	<title>アップロード処理の周辺実装のざっくりまとめ | CYOKODOG</title>
	<link rel="shortcut icon" href="/theme/cyokodog/favicon.ico">
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
<!--
	<link href='http://fonts.googleapis.com/css?family=Raleway:300' rel='stylesheet' type='text/css'>-->

  <link href='/theme/cyokodog/raleway.css' rel='stylesheet' type='text/css'>
  <link rel='stylesheet' href='/theme/cyokodog/css/app.min.css?a' type='text/css' media='all' />
  <link rel='stylesheet' id='style-css'  href='/theme/cyokodog/index.css' type='text/css' media='all' />


</head>
<body class="single single-post postid-232 single-format-standard logged-in " >
	<div class="l-header">
		<div class="u-layout-center">
      <div class="site-header">
        <a class="site-header__logo" href="/">
          <img src="https://lh4.googleusercontent.com/-u47wdUJYuNk/Tuiz2w6sLuI/AAAAAAAAEGA/v0cmgN4ZysU/s144/DSC01588.JPG"/>
        </a>
        <div class="site-header__text">
          <h1>
            <a href="/">CYOKODOG</a>
            <span class="social-icons">
              <a class="fa fa-github-square" href="https://github.com/cyokodog"></a>
              <a class="fa fa-twitter-square" href="https://twitter.com/cyokodog"></a>
              <!--<a class="fa fa-facebook-square" href="https://www.facebook.com/"></a>-->
              <a class="fa fa-google-plus-square" href="https://plus.google.com/u/0/115524754009910942363/posts"></a>
            </span>
          </h1>
          <h2>JS DEVELOPER BLOG
          </h2>
        </div>

<!--         <div class="site-header__search">
          <form class="searchForm" action="http://www.google.com/search" method="get">
            <input class="searchForm__queryData" name="q" type="hidden"/>
            <input class="searchForm__query" type="text" id="s" value=""/>
          </form>
			  </div>
 -->
      </div>
    </div>
	</div>

	<div class="l-site-nav">
		<div class="u-layout-center">
			<div class="tab site-nav">
        <ul>
          <li class="page_item ">
            <a href="/">HOME</a>
          </li>
          <li class="page_item current_page_parent">
            <a href="/blog/">BLOG</a>
          </li>
        </ul>
      </div>
		</div>
	</div>

  <div class="l-contents">
    <div class="u-layout-center">
<div class="l-article">
  <article class="article">

    <div class="article__header">
      <h1 class="article__title">
        <a href="/blog/upload-examples/" title="アップロード処理の周辺実装のざっくりまとめ">アップロード処理の周辺実装のざっくりまとめ</a>
      </h1>
      <ul class="article__info">
        <li class="article__info__date">2022-04-12</li>
<!--
        <li class="article__info__category"><a href="/category/http/" rel="category tag">HTTP</a></li>
-->
      </ul>
    </div>
    <div class="article__body">
    <p>ファイルアップロード周りの処理を調べてたら、バックエンド側の実装も含め整理したくなったので（すぐ忘れそうだし）、ざっくり調べた内容をまとめてみた。尚、サーバサイドは、express（Node.js）の利用が前提。</p>
<ul>
<li>ソースコード：<a href="https://github.com/cyokodog/file-upload-examples">https://github.com/cyokodog/file-upload-examples</a></li>
</ul>
<!--more-->
<h2 id="post-">POST データの授受</h2>
<p>まず、ミドルウェアに頼らない素の express では、form タグで POST された データの処理をどう実装するものなのか。次のようなフォームがあった場合、</p>
<pre><code class="lang-html">&lt;form action=&quot;/simple_post&quot; method=&quot;post&quot;&gt;
  &lt;div&gt;
    name:
    &lt;input name=&quot;name&quot; type=&quot;text&quot; value=&quot;山田太郎&quot; /&gt;
  &lt;/div&gt;
  &lt;button type=&quot;submit&quot;&gt;send&lt;/button&gt;
&lt;/form&gt;
</code></pre>
<p>Node.js では着信データをストリーミングで受け付けるため、次のようにデータを組みたてて、はじめて完成された 1 つのデータとして扱える。</p>
<pre><code class="lang-js">const port = process.env.PORT || 3000;
const app = express();

app.post(&quot;/simple_post&quot;, (req, res) =&gt; {
  let buffer = &quot;&quot;;
  req.on(&quot;data&quot;, (chunk) =&gt; {
    buffer += chunk;
  });
  req.on(&quot;end&quot;, function () {
    console.log(buffer); // 送信されてきたデータが完成！
    res.end(&quot;送信されました!&quot;);
  });
});

app.listen(port, () =&gt; console.log(`localhost:${port}`));
</code></pre>
<p>組み立てられた<code>buffer</code>の値を見ると、 URL エンコードされた値になっていることが分かる。</p>
<pre><code>name=%E5%B1%B1%E7%94%B0%E5%A4%AA%E9%83%8E
</code></pre><p>URL エンコードされるのは、form 要素の<code>enctype</code>属性のデフォルト値が<code>application/x-www-form-urlencoded</code>になっているためで、devTools のネットワークタブを見ても、同様の値が送信されていることが確認できる。</p>
<p>サーバ側でこの値を実際に使用する際は、<code>qs</code>等でパースして json 化したりする。</p>
<pre><code class="lang-js">console.log(qs.parse(buffer)); // { name: &#39;山田太郎&#39; }
</code></pre>
<h2 id="-">着信データを組み立てるミドルウェア</h2>
<p><code>body-parser</code>というミドルウェアを適用すると、着信データの組み立てと JSON 化を内部的に行い、<code>request.body</code>プロパティに送信されたデータを格納してくれる。</p>
<pre><code class="lang-js">import bodyParser from &quot;body-parser&quot;;

app.use(bodyParser.urlencoded({ extended: true }));
app.post(&quot;/simple_post&quot;, (req, res) =&gt; {
  console.log(req.body); // { name: &#39;山田太郎&#39; }
});
</code></pre>
<p>...というような記事がググるとでてくるが、このようにミドルウェアを使うのは昔の書き方で、express が v4.16.0 以降であればミドルウェアを使わずとも、次のように記述で同じことができる。</p>
<pre><code class="lang-js">app.use(express.urlencoded({ extended: true }));
</code></pre>
<p>尚、上記のように記述すると、app 全体にミドルウェアが適用されてしまい「エントリポイントによっては、このミドルウェアは適用したくないんだけど...」って場合もある。そのような場合は、個別のエントリポイント用に生成した<code>express</code>インスタンスにミドルウェアを適用し、そのインスタンスを app に割り当てればよい。</p>
<pre><code class="lang-js">const simple_post1 = express();
simple_post1.post(&#39;/simple_post1&#39;, (req, res) =&gt; { ... });
app.use(simple_post1);

const simple_post2 = express();
simple_post2.use(express.urlencoded({ extended: true }));
simple_post2.post(&#39;/simple_post2&#39;, (req, res) =&gt; { ... });
app.use(simple_post2);
</code></pre>
<h2 id="-">ファイル送信時のフォームとデータ構造</h2>
<p>form 要素でファイルを送信したい場合は、<code>input[type=&quot;file&quot;]</code>でファイルを指定するが、それだけだとファイルの中身は送信されず、ファイル名のみが送信される。</p>
<pre><code>name=%E5%B1%B1%E7%94%B0%E5%A4%AA%E9%83%8E&amp;attached=cyokodog.jpg
// qsでパースすると以下のようになる
// { name: &#39;山田太郎&#39;, attached: &#39;sample.txt&#39; }
</code></pre><p>ファイルの中身を送信するには、<code>enctype</code>属性に<code>multipart/form-data</code>の指定が必要。</p>
<pre><code class="lang-html">&lt;form action=&quot;...&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
  &lt;div&gt;
    name:
    &lt;input name=&quot;name&quot; type=&quot;text&quot; value=&quot;山田太郎&quot; /&gt;
    &lt;input name=&quot;attached&quot; type=&quot;file&quot; /&gt;
  &lt;/div&gt;
  &lt;button type=&quot;submit&quot;&gt;send&lt;/button&gt;
&lt;/form&gt;
</code></pre>
<p>これは、複数種類のファイルの複合データを 1 回の HTTP 通信で送信することを意味し、リクエストヘッダーの<code>Content-Type</code>には<code>multipart/form-data</code>が設定され、同時に、ファイルの境界を示すデリミタ文字列が<code>boundary</code>というキーで設定される。</p>
<pre><code>Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryxDl6b3uA61KGXyY6
</code></pre><p>リクエストボディには<code>boundary</code>キーの設定値で区切られた、複数のファイルが格納される。</p>
<pre><code>------WebKitFormBoundaryxDl6b3uA61KGXyY6
Content-Disposition: form-data; name=&quot;name&quot;

山田太郎
------WebKitFormBoundaryxDl6b3uA61KGXyY6
Content-Disposition: form-data; name=&quot;attached&quot;; filename=&quot;sample.txt&quot;
Content-Type: text/plain

sample.txtの中身
------WebKitFormBoundaryxDl6b3uA61KGXyY6--
</code></pre><p><code>boundary</code>の文字列で区切られた各エリアの中身を抜きせば、ファイルの中身も取得できる。</p>
<h2 id="-">ファイルデータの参照</h2>
<p>着信データはストリームで且つ、<code>multipart/form-data</code>で送られる上記のようなデータはパースも面倒。そのため、Node.js に限らずだいたいどの言語でも、<code>multipart/form-data</code>で送られたデータをシンプルに扱えるモジュールが存在する。</p>
<p>express の場合、次のようなミドルウェアがある。</p>
<ul>
<li>express-fileupload</li>
<li>formidable</li>
<li>multer</li>
</ul>
<p>ざっと見た感じ<code>express-fileupload</code>が扱いやすそうだったので、これを使ってみる。</p>
<pre><code class="lang-js">import fileUpload from &quot;express-fileupload&quot;;

const multipart_post2 = express();
multipart_post2.use(fileUpload());
multipart_post2.post(&quot;/multipart_post2&quot;, (req, res) =&gt; {
  console.log(&quot;req.body&quot;, req.body);
  console.log(&quot;req.files&quot;, req.files);
  res.end(&quot;ok!&quot;);
});
app.use(multipart_post2);
</code></pre>
<p><code>body-parser</code>同様に<code>request.body</code>プロパティに送信データが json で格納され、<code>type=&quot;file&quot;</code>で指定されたファイルの情報は<code>request.files</code>プロパティに格納される。</p>
<pre><code>// request.body
{ name: &#39;山田太郎&#39; }

// request.files
{
  attached: {
    name: &#39;sample.txt&#39;,
    data: &lt;Buffer 73 61 6d 70 6c 65 2e 74 78 74 e3 81 ae e4 b8 ad e8 ba ab&gt;,
    size: 19,
    encoding: &#39;7bit&#39;,
    tempFilePath: &#39;&#39;,
    truncated: false,
    mimetype: &#39;text/plain&#39;,
    md5: &#39;723321fd83439a69951ee6cb5e348955&#39;,
    mv: [Function: mv]
  }
}
</code></pre><p>上記の<code>request.files</code>には<code>attached</code>というキーがあるが、これは input 要素の<code>name</code>属性の値が設定さている。そして、この<code>attached</code>というキーには<code>UploadedFile</code>オブジェクトが 1 つ割り当てられている。</p>
<pre><code>{
  attached: { ... } // UploadedFile オブジェクト
}
</code></pre><p>もし、<code>&lt;input name=&quot;attached_multi&quot; type=&quot;file&quot; multiple /&gt;</code>のように、<code>multiple</code>属性の指定により、複数のファイルがアップロードされた場合は、ファイル数分の<code>UploadedFile</code>オブジェクトが配列形式で保持される構成になる。</p>
<p>例えば、次のようなフォームで複数ファイル指定して送信された場合、</p>
<pre><code class="lang-html">&lt;input name=&quot;attached&quot; type=&quot;file&quot; /&gt;&lt;br /&gt;
&lt;input name=&quot;attached_multi&quot; type=&quot;file&quot; multiple /&gt;
</code></pre>
<p>次のような構成になる。</p>
<pre><code>{
  attached: { ... }, // UploadedFile オブジェクト
  attached_multi: [
    { ... }, // UploadedFile オブジェクト
    { ... }, // UploadedFile オブジェクト
    { ... }, // UploadedFile オブジェクト
  ],
}
</code></pre><h2 id="-">ファイルの保存方法</h2>
<p>ファイルの保存は<code>UploadedFile</code>オブジェクトの<code>mv</code>メソッドにパスを指定することで行える。ファイル名も<code>name</code>プロパティで参照可能。</p>
<pre><code>uploadedFile.mv(__dirname + &#39;/&#39; + uploadedFile.name)
</code></pre><p>前述のように<code>UploadedFile</code>オブジェクトは配列に格納されるケースもある。なのでファイルの保存完了を待機しレスポンスを返すのであれば、次のようなコードで実現できる。</p>
<pre><code class="lang-js">const saveFile = (dir: string, uploadedFile: UploadedFile): Promise&lt;void&gt; =&gt; {
  return new Promise(async (resolve) =&gt; {
    const path = dir + &quot;/&quot; + uploadedFile.name;
    await uploadedFile.mv(path);
    resolve();
  });
};

const saveFiles = (
  dir: string,
  fileArray: FileArray | undefined
): Promise&lt;void[]&gt; =&gt; {
  if (!fileArray) {
    return Promise.resolve([]);
  }
  let promises: Promise&lt;void&gt;[] = [];
  for (let key in fileArray) {
    const filesItem: UploadedFile | UploadedFile[] = fileArray[key];
    const newPromises =
      filesItem instanceof Array
        ? filesItem.map((uploadedFile) =&gt; saveFile(dir, uploadedFile))
        : [saveFile(dir, filesItem)];
    promises = [...promises, ...newPromises];
  }
  return Promise.all(promises);
};

const multipart_post2 = express();
multipart_post2.use(fileUpload());
multipart_post2.post(&quot;/multipart_post2&quot;, async (req, res) =&gt; {
  await saveFiles(__dirname, req.files);
  res.end(&quot;ok!&quot;);
});
app.use(multipart_post2);
</code></pre>
<p>ちなみに<code>express-fileupload</code>は、<code>busboy</code>というモジュールをラップして作られており、サイズ容量が大きくなりがちな動画ファイルを、<code>busboy</code>を使いストリームで受信しつつ YouTube にアップロードする、なんてこともできるらしい。</p>
<ul>
<li>「<a href="https://qiita.com/takamura_s/items/b7cbfbb5ba2879b81f5c">multipart のアップロードストリームを Youtube 投稿ストリームに受け流す - Qiita</a>」</li>
</ul>
<h2 id="-">単一ファイルのみのアップロード</h2>
<p><code>multipart/form-data</code>はパースが面倒なのでミドルウェアを使ったけど、単一ファイルしかアップロードしない前提であれば、ミドルウェアを使わずともシンプルなコードで済ませられる。</p>
<p>ただし、この場合、フロント側は JS の利用が前提となり、任意のバイナリ形式を意味する<code>application/octet-stream</code>を<code>Content-Type</code>に指定し、バイナリで送信する必要がある。</p>
<p>例えば、次のように、送信データを<code>Blob</code>でリクエストボディに設定し、その他のメタデータを<code>query</code>に指定すると、</p>
<pre><code class="lang-js">const blob = new Blob([&quot;this is text&quot;], { type: &quot;application/text&quot; });
const query = new URLSearchParams({ fileName: &quot;sample.txt&quot; });
fetch(`/octet_stream_post?${query}`, {
  method: &quot;POST&quot;,
  headers: {
    &quot;Content-Type&quot;: &quot;application/octet-stream&quot;,
  },
  body: blob,
});
</code></pre>
<p>バックエンドでは、<code>express.raw()</code>を使い送信された内容をそのまま受け取り、<code>query</code>に指定されたファイル名で保存することができる。</p>
<pre><code class="lang-js">const octetStreamPost = express();
octetStreamPost.use(express.raw());
octetStreamPost.post(&quot;/octet_stream_post&quot;, async (req, res) =&gt; {
  const uploadPath = __dirname + &quot;/&quot; + req.query.fileName;
  await fs.writeFileSync(uploadPath, req.body);
  res.send(&quot;end&quot;);
});
app.use(octetStreamPost);
</code></pre>
<h3 id="-">ユーザが指定したファイルの送信</h3>
<p>ユーザにより指定されたファイルは、<code>File</code>オブジェクトで取得できる。例えば<code>&lt;input type=&quot;file&quot;&gt;</code>で指定されたファイルは、<code>FilesList</code>を経由し<code>File</code>オブジェクトとして参照できる。</p>
<pre><code class="lang-js">const el = document.querySelector(&quot;input[type=file]&quot;);
if (!el || !el.files || !el.files.length) return;
const fileList: FileList = el.files;
const file: File = fileList[0];
</code></pre>
<p>そして、<code>File</code>は、ファイル名等を保持する<code>Blob</code>を継承したオブジェクトなため、<code>Blob</code>と同様の扱いで送信できる。</p>
<pre><code class="lang-js">const query = new URLSearchParams({ fileName: file.name });
fetch(`/octet_stream_post?${query}`, {
  method: &quot;POST&quot;,
  headers: {
    &quot;Content-Type&quot;: &quot;application/octet-stream&quot;,
  },
  body: file,
});
</code></pre>
<h2 id="formdata-">FormData によるアップロード</h2>
<p>JS 経由の<code>multipart/form-data</code>による送信なら、<code>FormData</code>でもアップロードできる。例えば<code>&lt;input type=&quot;file&quot;&gt;</code>を含む form 要素が存在しているのであれば、その form 要素を引数に<code>FormData</code>を生成し、リクエストボディに設定すれば良い。</p>
<pre><code class="lang-js">const formEl = document.querySelector(&quot;form&quot;);
if (formEl) {
  const formData = new FormData(formEl);
  fetch(&quot;/multipart_post2&quot;, { method: &quot;POST&quot;, body: formData });
}
</code></pre>
<p>また、<code>fetch</code>は、<code>Content-Type</code>の指定を省略すると自動判定で設定される。上記の場合であれば<code>&lt;input type=&quot;file&quot;&gt;</code>が<code>FormData</code>に含まれているので、<code>boundary</code>付きの<code>multipart/form-data</code>が設定される。</p>
<pre><code>multipart/form-data; boundary=----WebKitFormBoundaryHAGzEiHqQeFAJncA
</code></pre><p>もし、<code>form</code>要素が存在しないなら、次のように任意のデータで<code>FormData</code>を組み立てることもできる。</p>
<pre><code class="lang-js">const fileEl = document.querySelector(&#39;input[type=file]&#39;) as HTMLInputElement;
if (fileEl &amp;&amp; fileEl.files &amp;&amp; fileEl.files.length) {
  const formData = new FormData();
  formData.append(&#39;name&#39;, &#39;taro yamada&#39;);
  formData.append(&#39;attached&#39;, fileEl.files[0]);
  fetch(&#39;/multipart_post2&#39;, {
    method: &#39;POST&#39;,
    body: formData,
  });
}
</code></pre>
<h2 id="-">ドラッグ＆ドロップによるアップロード</h2>
<p>アップロードしたいファイルを<code>File</code>オブジェクトで取得できれば、ここまで見てきた方法でアップロードできることがわかった。</p>
<p>ドラッグ＆ドロップで掴んだファイルは、<code>DragEvent.DataTransfer.FileList</code>を経由し参照できるので、次の実装でアップロードできる。</p>
<pre><code class="lang-jsx">&lt;div onDragover={onDragover} onDrop={onDrop}&gt;
  ここにファイルをドロップするとアップロードされます
&lt;/div&gt;
</code></pre>
<pre><code class="lang-js">const onDragover = (e: DragEvent) =&gt; {
  e.stopPropagation();
  e.preventDefault();
};
const onDrop = (e: DragEvent) =&gt; {
  e.stopPropagation();
  e.preventDefault();

  const dataTransfer: DataTransfer | null = e.dataTransfer;
  if (!dataTransfer) return;
  const files: FileList = dataTransfer.files;
  if (!files || !files.length) return;
  const file: File = files[0];
  const formData = new FormData();
  formData.append(&quot;attached&quot;, file);
  fetch(&quot;/multipart_post2&quot;, {
    method: &quot;POST&quot;,
    body: formData,
  });
};
</code></pre>
<h2 id="-">クリップボードのファイルをアップロード</h2>
<p>スクリーンショットや、Finder でのファイルの<code>CMD+C</code>により、クリップボードに記録されたファイルは、DOM 上の<code>paste</code>イベントを通じ<code>ClipboardEvent</code>から得られる。</p>
<p><code>ClipboardEvent</code>が保持する<code>clipboardData</code>というプロパティの実態は、上述の<code>DataTransfer</code>でにあたるため、ドラッグ＆ドロップと同様に実装で<code>File</code>を参照し、アップロードすることができる。</p>
<pre><code class="lang-jsx">&lt;textarea
  onPaste={onPaste}
  placeholder=&quot;ファイルをペーストするとアップロードされます&quot;
&gt;&lt;/textarea&gt;
</code></pre>
<pre><code class="lang-js">const onPaste = (e: ClipboardEvent) =&gt; {
  const dataTransfer: DataTransfer | null = e.clipboardData;
  if (!dataTransfer) return;
  const files: FileList = dataTransfer.files;
  if (!files || !files.length) return;
  const file: File = files[0];
  const formData = new FormData();
  formData.append(&quot;attached&quot;, file);
  fetch(&quot;/multipart_post2&quot;, {
    method: &quot;POST&quot;,
    body: formData,
  });
};
</code></pre>
<p>また、スクリーンショットをペーストした時の<code>File.name</code>は、<code>image.png</code>の固定値になる。</p>
<h2 id="-">アップロード前の画像のサイズを縮小したい場合</h2>
<p>画像の大きさを一定サイズ以下に強制変換してアップロードしたい場合は、</p>
<ul>
<li>File -&gt; Image -&gt; Canvas（サイズ変更） -&gt; Blob -&gt; File</li>
</ul>
<p>の順で変換することができる。</p>
<pre><code class="lang-js">const justifyImageSizeAsync = (
  file: File,
  params: { maxWidth: number }
): Promise&lt;File&gt; =&gt; {
  const { maxWidth } = params;
  return new Promise((resolve) =&gt; {
    if (!/^image\/(png|jpeg|jpg|bmp)$/.test(file.type)) {
      resolve(file);
      return;
    }
    const img = new Image();
    img.src = URL.createObjectURL(file);
    img.onload = () =&gt; {
      const { naturalWidth, naturalHeight } = img;
      if (naturalWidth &lt; maxWidth) {
        resolve(file);
        return;
      }
      const canvas = document.createElement(&quot;canvas&quot;);
      const ctx = canvas.getContext(&quot;2d&quot;);
      if (!ctx) return;
      canvas.width = maxWidth;
      canvas.height = (naturalHeight * canvas.width) / naturalWidth;
      ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
      canvas.toBlob((blob) =&gt; {
        if (blob) {
          resolve(new File([blob], file.name));
        }
      });
    };
  });
};
</code></pre>
<h2 id="-base64-">画像を base64 で送りたい場合</h2>
<p>画像ファイルのやり取りをバイナリでしたくない場合は、base64 にして、JSON に包んで送信する方法もある。上述のように一旦、Canvas にしてるのであれば、<code>canvas.toDataURL()</code>で base64 にできるが、特に加工が不要なのであれば<code>FileReader#readAsDataURL</code>でも変換できる。</p>
<pre><code class="lang-js">const toBase64Async = (file: File): Promise&lt;string&gt; =&gt; {
  return new Promise(resolve =&gt; {
    const reader = new FileReader();
    reader.readAsDataURL(file);
    reader.onload = () =&gt; {
      const base64 = reader.result as string;
      resolve(base64);
    };
  });
};
const sendByJson = async () =&gt; {
  const el = document.querySelector(&#39;#sendByJson input[type=file]&#39;) as HTMLInputElement;
  if (!el || !el.files || !el.files.length) return;
  const fileList: FileList = el.files;
  const file: File = fileList[0];
  if (!/^image\/(png|jpeg|jpg|bmp)$/.test(file.type)) return;
  const base64 = await toBase64Async(file);
  fetch(&#39;/json_post&#39;, {
    method: &#39;POST&#39;,
    headers: {
      &#39;Content-Type&#39;: &#39;application/json&#39;,
    },
    body: JSON.stringify({ base64, fileName: file.name }),
  });
};
</code></pre>
<p>バックエンド側では、サイズオーバーでリジェクトされないように<code>express.json({ limit: &#39;10mb&#39; })</code>のように上限サイズを大き目に設定しておく。また、画像ファイルをバイナリ形式で保存したい場合は<code>Buffer.from</code>で変換すれば OK。</p>
<pre><code class="lang-js">const json_post = express();
json_post.use(express.json({ limit: &quot;10mb&quot; }));
json_post.post(&quot;/json_post&quot;, async (req, res) =&gt; {
  const match = req.body.base64.match(/data:image\/(.+);base64,(.+)/);
  const [, _extension, base64] = match;
  const buffer = Buffer.from(base64, &quot;base64&quot;);
  const uploadPath = __dirname + &quot;/&quot; + req.body.fileName;
  await fs.writeFileSync(uploadPath, buffer);
  res.json({ status: &quot;ok&quot; });
});
app.use(json_post);
</code></pre>

    </div>

  </article>
</div>

  <div class="l-page-nav">
    <div class="l-page-nav__body">
  
  <!--
      <div class="wp-widget">
        <div class="wp-widget__header">OTHER BLOG</div>
        <div class="menu-other-blog-container">
          <ul id="menu-other-blog" class="menu">
            <li id="menu-item-207" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-207"><a href="http://cyokodog.tumblr.com/">CYOKOLOG | Tumblr</a></li>
            <li id="menu-item-208" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-208"><a href="http://d.hatena.ne.jp/cyokodog/">Cyokodog :: Diary | Hatena</a></li>
            <li id="menu-item-209" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-209"><a href="http://d.hatena.ne.jp/cyokodog-memo/">Cyokodog :: Memo | Hatena</a></li>
          </ul>
        </div>
      </div>
  
      <div class="wp-widget">
        <div class="wp-widget__header">Category</div>
        <ul>
          <li><a href="/category/angular/">Angular</a></li>
          <li><a href="/category/backbone-js/">Backbone.js</a></li>
          <li><a href="/category/webpack/">Webpack</a></li>
          <li><a href="/category/jquery/">jQuery</a></li>
          <li><a href="/category/info/">Information</a></li>
          <li><a href="/category/life/">Life</a></li>
          <li><a href="/category/http/">HTTP</a></li>
          <li><a href="/category/javascript/">JavaScript</a></li>
          <li><a href="/category/redux/">Redux</a></li>
          <li><a href="/category/wordpress/">WordPress</a></li>
          <li><a href="/category/typescript/">TypeScript</a></li>
          <li><a href="/category/cloud-service/">Cloud Service</a></li>
        </ul>
      </div>
  
      <div class="wp-widget">
        <div class="wp-widget__header">Recent Posts</div>
        <ul>
          <li><a href="/blog/dynamic-subsetting-of-web-fonts-and-canvas/">動的サブセッティング下でのWebフォントのCanvasへの適用方法</a></li>
          <li><a href="/blog/upload-examples/">アップロード処理の周辺実装のざっくりまとめ</a></li>
          <li><a href="/blog/http-302-status/">セッション切れ時のフロント側の制御について</a></li>
          <li><a href="/blog/code-splitting-and-async-component/">Code Splitting と非同期コンポーネント</a></li>
          <li><a href="/blog/typescript-enum-replacement/">Enum の代わりに使う union 型</a></li>
          <li><a href="/blog/redux-toolkit-entity-adapter/">Redux Toolkit の EntityAdapter をさわってみる</a></li>
          <li><a href="/blog/redux-toolkit-async-thunk/">Redux Toolkit の AsyncThunk をさわってみる</a></li>
          <li><a href="/blog/redux-tookit/">Redux Toolkitをさわってみる</a></li>
          <li><a href="/blog/forever-http/">foreverとAutomator.appでMac起動時にHTTPサーバを自動起動する</a></li>
          <li><a href="/blog/pixijs-retina-display/">Canvas, PixiJSからRetinaディスプレイに配慮した画像の切り出しを行う</a></li>
          <li><a href="/blog/typescript-v3-8/">TypeScript v3.8 の新機能メモ</a></li>
          <li><a href="/blog/fish-based-terminal-environment/">fish shellベースのターミナル環境を整える</a></li>
          <li><a href="/blog/moment-i18n/">moment.js で i18n 対応したり期間を文字列化する時の注意点</a></li>
          <li><a href="/blog/inversify-js/">Nodeで書く時TypeScriptでDIしたい</a></li>
          <li><a href="/blog/angular-fire/">AngularFire使ってみた</a></li>
          <li><a href="/blog/puppeteer/">Headless Chrome を操作する Puppeteer で E2E テストを CircleCI で動かしてみた</a></li>
          <li><a href="/blog/computer-vision-api/">getUserMedia と連携させて Computer Vision API を使ってみた</a></li>
          <li><a href="/blog/use-well-json-server/">JSON Serverのおしいところをなんとかしたい</a></li>
          <li><a href="/blog/headless-chrome/">Headless Chrome をさわってみた</a></li>
          <li><a href="/blog/zone-async-await/">zone.js と async / await を併用してみる</a></li>
          <li><a href="/blog/sqlite-and-sequelize/">SQlite と Sequelize</a></li>
          <li><a href="/blog/vscode-debug/">VSCodeで便利にdebugする方法</a></li>
          <li><a href="/blog/google-cloud-speech-api/">Google Cloud Speech API の使い方</a></li>
          <li><a href="/blog/mediacaptureandstreams-and-mediarecorder/">Media Capture and Streams と MediaRecorder のその後と GitHubの複数アカウント利用方法メモ</a></li>
          <li><a href="/blog/bitbar/">BitBar を試してみる</a></li>
          <li><a href="/blog/angular-cli/">Angular CLI を試してみる</a></li>
          <li><a href="/blog/riot/">はじめてのRiot.js</a></li>
          <li><a href="/blog/facebook-flux/">はじめてのfacebook/flux</a></li>
          <li><a href="/blog/reactjs/">はじめてのReact.js</a></li>
          <li><a href="/blog/angular2/">Angular2で簡易ブログを作ってみる</a></li>
          <li><a href="/blog/electron/">Electron さわってみた</a></li>
          <li><a href="/blog/svg-webaudio-typing-game/">SVG + Web Audio API でつくるタイピングゲーム</a></li>
          <li><a href="/blog/wunderline/">Wunderline を使ってみた</a></li>
          <li><a href="/blog/media-capture-and-streams-web-audio-api/">Media Capture and Streams と Web Audio API で実現する録画・録音・ WAVファイルの生成</a></li>
          <li><a href="/blog/web-speechi-api/">ブラウザのみで音声認識とテキスト読み上げを実現する Web Speech API</a></li>
          <li><a href="/blog/thinking-toc/">TOC（目次メニュー）の実装方法について考えてみる</a></li>
          <li><a href="/blog/web-audio-api-music/">HTML5 の Web Audio API で音楽してみる</a></li>
          <li><a href="/blog/first-node-js/">Windows ではじめてみる Node.js</a></li>
          <li><a href="/blog/angularjs/">MVWフロントエンド・フレームワーク、AngularJS をはじめてみる</a></li>
          <li><a href="/blog/backbone-js/">Backbone.js ではじめるクライアントサイド MVC プログラミング</a></li>
          <li><a href="/blog/pull-request-github/">Pull Request ではじめてみる！GitHub ソーシャルコーディング</a></li>
          <li><a href="/blog/javascript-prototype/">JavaScript の prototype オブジェクト入門</a></li>
          <li><a href="/blog/easy-code-prettify-doc/">マークダウンにも優しいライブデモ対応シンタックスハイライター jQuery プラグイン</a></li>
          <li><a href="/blog/ex-code-prettify-v05/">Ex Code Prettify をバージョンアップしました【追記あり】</a></li>
          <li><a href="/blog/sk8-bs-bordslide/">うちの小３男子がダウンレールでＢ／Ｓボードスライドを習得した</a></li>
          <li><a href="/blog/twitter-cards/">WordPress 製のブログを Twitter カードに対応させてみた</a></li>
          <li><a href="/blog/wordpress-ogp/">WordPress 製のブログを OGP(Open Graph Protocol) に対応させてみた</a></li>
          <li><a href="/blog/fade-page-doc/">フェード効果で「ふわっ」とページ切替を行う jQuery プラグイン</a></li>
          <li><a href="/blog/fade-page-change/">フェードイン／フェードアウトで「ふわっ」とページを切り替える【追記あり】</a></li>
          <li><a href="/blog/fit-sidebar-doc/">レスポンシブ対応でサイドメニューを一定範囲で固定表示する jQuery プラグイン</a></li>
          <li><a href="/blog/making-fg-chopper/">挑戦！自作フィギュア　ワンピース・チョッパー編</a></li>
          <li><a href="/blog/sketch-akuma-cyoojin/">大人だけど全力で「７人の悪魔超人編」の絵を描いてみた</a></li>
          <li><a href="/blog/making-fg-ramen-2/">挑戦！自作フィギュア　ラーメンマン編　その２</a></li>
          <li><a href="/blog/making-fg-ramen-1/">挑戦！自作フィギュア　ラーメンマン編　その１</a></li>
          <li><a href="/blog/fitbar-doc/">ツールバーをスクロール位置に応じ画面の上下にピタっと固定表示する jQuery プラグイン</a></li>
          <li><a href="/blog/picasa-zoom-doc/">Picasa の写真の拡大／縮小を簡単に行うことできる jQuery プラグイン</a></li>
          <li><a href="/blog/update-easy-social-buttons-and-social-info/">Easy Social Buttons と Social Info で Google+ の共有数を表示／取得できるようにしました</a></li>
          <li><a href="/blog/making-fg-2/">挑戦！自作フィギュア　ウォーズマン編　その２</a></li>
          <li><a href="/blog/dqy-excel/">システム管理者におすすめ！SQL の実行結果を手軽にエクセルに出力する方法</a></li>
          <li><a href="/blog/mailto-doc/">mailto:リンク機能を利用しやすくする jQuery プラグイン</a></li>
          <li><a href="/blog/ml-narisumasi-gmail-and-gas/">メーリングリストの「なりすまし」判定を Gmail と Google Apps Script で回避する方法</a></li>
          <li><a href="/blog/making-fg-1/">挑戦！自作フィギュア　ウォーズマン編　その１</a></li>
          <li><a href="/blog/find-fg-akiba-3/">第３回アキバ・フィギュア探しの旅</a></li>
          <li><a href="/blog/easy-social-buttons-doc/">はてブ、Twitter、Facebook、Google+ のソーシャルボタンをシンプルに表示する jQuery プラグイン</a></li>
          <li><a href="/blog/wordpress-openshift/">PaaS で動かす WordPress ＋ OpenShift 入門</a></li>
          <li><a href="/blog/first-appengine-and-struts2/">Google App Engine for Java 入門 ＋ Struts2 デプロイ手順</a></li>
          <li><a href="/blog/first-struts2/">2014年度版 Eclipse + Struts2 による Java Web アプリ開発入門</a></li>
          <li><a href="/blog/social-info-doc/">はてブ、Twitter、Facebook、Google+ などのソーシャル系サービスの API を手軽に使用できるようにする jQuery プラグイン</a></li>
          <li><a href="/blog/easy-feed-doc/">Google Feed API を手軽に利用できるようにする jQuery プラグイン</a></li>
          <li><a href="/blog/find-fg-akiba-2/">第２回アキバ・フィギュア探しの旅</a></li>
          <li><a href="/blog/sketch-kinnikuman/">大人だけど全力でキン肉マンの絵を描いてみた</a></li>
          <li><a href="/blog/hash-contents-doc/">location.hash に応じタブ、アコーディオン、ツリービュー形式等でコンテンツを切り替える jQuery プラグイン</a></li>
          <li><a href="/blog/keep-position-doc/">ページのスクロール位置を維持したままフォーム送信やページ切り替えができる jQuery プラグイン</a></li>
          <li><a href="/blog/find-fg-akiba-1/">第１回アキバ・フィギュア探しの旅</a></li>
          <li><a href="/blog/keyinfo-doc/">入力キーの種類を調べることができる jQuery プラグイン</a></li>
          <li><a href="/blog/parse-url-doc/">URL の構成要素や QueryString の値を簡単に参照できるようにする jQuery プラグイン</a></li>
          <li><a href="/blog/ex-scroll-doc/">スクロールイベントの開始／終了、方向を判別できる jQuery プラグイン</a></li>
          <li><a href="/blog/ex-code-prettify-doc/">その場で編集／実行できるシンタックスハイライター jQuery プラグイン</a></li>
          <li><a href="/blog/garamodel02/">ガラクタで重厚感のあるおもちゃを作ってみた ～その２～</a></li>
          <li><a href="/blog/garamodel/">ガラクタで重厚感のあるおもちゃを作ってみた</a></li>
          <li><a href="/blog/bootstrap-datetimepicker-ja/">Bootstrap ベースの日付／時刻ピッカーを日本語環境向けにカスタマイズした jQuery プラグイン</a></li>
          <li><a href="/blog/jquery-hash-contents/">location.hash の値に応じ表示コンテンツを切り替える jQuery プラグインを作ってみた</a></li>
          <li><a href="/blog/jquery-keep-position/">フォームデータ登録後もページスクロール位置を維持する方法を考えてみた</a></li>
          <li><a href="/blog/jquery-sitekit/">Web サイト作成時に必要になりがちな機能をまとめた jQuery プラグイン</a></li>
          <li><a href="/blog/jquery-ex-code-prettify/">Google Code Prettify のかゆいとこをなんとかする jQuery プラグインを書いてみた</a></li>
          <li><a href="/blog/wordpress-markdown-behave_js/">WordPress の Markdown 環境を『Behave.js』でさらに快適にしてみる</a></li>
          <li><a href="/blog/gmail-client/">Google 以外のメールアカウントで Gmail をメールクライアントとして使用する方法</a></li>
          <li><a href="/blog/wordpress-my-setting-plugin-social/">WordPress のこまごま設定プラグインにソーシャルボタン設置機能、他を追加した</a></li>
          <li><a href="/blog/wordpress-my-setting-plugin/">こまごました設定をまとめてできる WordPress プラグイン</a></li>
          <li><a href="/blog/extablefilter/">汎用性重視のテーブルフィルタリング系 jQuery プラグイン</a></li>
          <li><a href="/blog/jquery19-browser/">jQuery 1.9 で $.browser が使えなくなってしまった対策</a></li>
          <li><a href="/blog/jquery-simple-table-filter/">jQuery によるシンプルなテーブルフィルタリング処理の実装を考えてみる</a></li>
          <li><a href="/blog/first-post/">引っ越してきました</a></li>
        </ul>
      </div>
  -->
    </div><!-- l-page-nav -->
  </div><!-- l-page-nav__body -->

  	</div>
  </div><!-- l-contents -->


  <style>
  .l-banner{
    xpadding-top:128px;
    padding-bottom:128px;
    background-image: url(https://lh4.googleusercontent.com/-oCiTMRZC7KI/VEaEI6xu2aI/AAAAAAAAIKk/da528QPvTYY/s800/IMG_1723.png);
    background-repeat: no-repeat;
    background-position: bottom right;
    background-size: 640px
  }
  l-footer{
    margin-top:0;
  }
  .banner iframe,
  .banner img{
    xmargin:16px 0 0;
    max-width: 260px;
    xmax-height: 150px;
    xdisplay:block;
    border:none;
  }
  .banner__pxgrid{
  }
  </style>

  <div class="l-contents l-banner">
    <div class="u-layout-center">
      <div class="banner">
        <div>
          <a href="http://www.codegrid.net/"><img src="/static/img/codegrid.png"/></a><a href="https://www.pxgrid.com/"><img class="banner__pxgrid" src="/static/img/pxgrid.png"/></a>
        </div>
        <div>
          <iframe src="https://www.youtube.com/embed/gZvCPu7qZiM?rel=0&amp;controls=0&amp;showinfo=0" frameborder="0" allowfullscreen></iframe><iframe src="https://www.youtube.com/embed/VKWWFvWsPUg?rel=0&amp;controls=0&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>
        </div>
        <div>
        <iframe src="https://www.youtube.com/embed/5DU59_X-8lw?rel=0&amp;controls=0&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>
        </div>
      </div>
    </div>
  </div><!-- l-contents -->


  <div class="l-footer">
    <div class="u-layout-center">
      <div class="wp-widget">
        <div class="wp-widget__header" id="allPosts">All Posts</div>
          <ul>
            <li>
              <span class="post-date">2022-07-13</span>
              <a href="/blog/dynamic-subsetting-of-web-fonts-and-canvas/">動的サブセッティング下でのWebフォントのCanvasへの適用方法</a>
            </li>
            <li>
              <span class="post-date">2022-04-12</span>
              <a href="/blog/upload-examples/">アップロード処理の周辺実装のざっくりまとめ</a>
            </li>
            <li>
              <span class="post-date">2020-10-16</span>
              <a href="/blog/http-302-status/">セッション切れ時のフロント側の制御について</a>
            </li>
            <li>
              <span class="post-date">2020-10-10</span>
              <a href="/blog/code-splitting-and-async-component/">Code Splitting と非同期コンポーネント</a>
            </li>
            <li>
              <span class="post-date">2020-07-30</span>
              <a href="/blog/typescript-enum-replacement/">Enum の代わりに使う union 型</a>
            </li>
            <li>
              <span class="post-date">2020-07-09</span>
              <a href="/blog/redux-toolkit-entity-adapter/">Redux Toolkit の EntityAdapter をさわってみる</a>
            </li>
            <li>
              <span class="post-date">2020-06-04</span>
              <a href="/blog/redux-toolkit-async-thunk/">Redux Toolkit の AsyncThunk をさわってみる</a>
            </li>
            <li>
              <span class="post-date">2020-05-28</span>
              <a href="/blog/redux-tookit/">Redux Toolkitをさわってみる</a>
            </li>
            <li>
              <span class="post-date">2020-04-08</span>
              <a href="/blog/forever-http/">foreverとAutomator.appでMac起動時にHTTPサーバを自動起動する</a>
            </li>
            <li>
              <span class="post-date">2020-04-07</span>
              <a href="/blog/pixijs-retina-display/">Canvas, PixiJSからRetinaディスプレイに配慮した画像の切り出しを行う</a>
            </li>
            <li>
              <span class="post-date">2020-03-11</span>
              <a href="/blog/typescript-v3-8/">TypeScript v3.8 の新機能メモ</a>
            </li>
            <li>
              <span class="post-date">2020-02-01</span>
              <a href="/blog/fish-based-terminal-environment/">fish shellベースのターミナル環境を整える</a>
            </li>
            <li>
              <span class="post-date">2018-02-06</span>
              <a href="/blog/moment-i18n/">moment.js で i18n 対応したり期間を文字列化する時の注意点</a>
            </li>
            <li>
              <span class="post-date">2018-01-10</span>
              <a href="/blog/inversify-js/">Nodeで書く時TypeScriptでDIしたい</a>
            </li>
            <li>
              <span class="post-date">2017-11-15</span>
              <a href="/blog/angular-fire/">AngularFire使ってみた</a>
            </li>
            <li>
              <span class="post-date">2017-09-24</span>
              <a href="/blog/puppeteer/">Headless Chrome を操作する Puppeteer で E2E テストを CircleCI で動かしてみた</a>
            </li>
            <li>
              <span class="post-date">2017-07-20</span>
              <a href="/blog/computer-vision-api/">getUserMedia と連携させて Computer Vision API を使ってみた</a>
            </li>
            <li>
              <span class="post-date">2017-06-30</span>
              <a href="/blog/use-well-json-server/">JSON Serverのおしいところをなんとかしたい</a>
            </li>
            <li>
              <span class="post-date">2017-06-15</span>
              <a href="/blog/headless-chrome/">Headless Chrome をさわってみた</a>
            </li>
            <li>
              <span class="post-date">2017-05-06</span>
              <a href="/blog/zone-async-await/">zone.js と async / await を併用してみる</a>
            </li>
            <li>
              <span class="post-date">2017-03-08</span>
              <a href="/blog/sqlite-and-sequelize/">SQlite と Sequelize</a>
            </li>
            <li>
              <span class="post-date">2017-02-01</span>
              <a href="/blog/vscode-debug/">VSCodeで便利にdebugする方法</a>
            </li>
            <li>
              <span class="post-date">2016-12-21</span>
              <a href="/blog/google-cloud-speech-api/">Google Cloud Speech API の使い方</a>
            </li>
            <li>
              <span class="post-date">2016-08-23</span>
              <a href="/blog/mediacaptureandstreams-and-mediarecorder/">Media Capture and Streams と MediaRecorder のその後と GitHubの複数アカウント利用方法メモ</a>
            </li>
            <li>
              <span class="post-date">2016-07-05</span>
              <a href="/blog/bitbar/">BitBar を試してみる</a>
            </li>
            <li>
              <span class="post-date">2016-06-30</span>
              <a href="/blog/angular-cli/">Angular CLI を試してみる</a>
            </li>
            <li>
              <span class="post-date">2016-06-14</span>
              <a href="/blog/riot/">はじめてのRiot.js</a>
            </li>
            <li>
              <span class="post-date">2016-06-11</span>
              <a href="/blog/facebook-flux/">はじめてのfacebook/flux</a>
            </li>
            <li>
              <span class="post-date">2016-06-09</span>
              <a href="/blog/reactjs/">はじめてのReact.js</a>
            </li>
            <li>
              <span class="post-date">2016-05-18</span>
              <a href="/blog/angular2/">Angular2で簡易ブログを作ってみる</a>
            </li>
            <li>
              <span class="post-date">2016-03-02</span>
              <a href="/blog/electron/">Electron さわってみた</a>
            </li>
            <li>
              <span class="post-date">2016-02-24</span>
              <a href="/blog/svg-webaudio-typing-game/">SVG + Web Audio API でつくるタイピングゲーム</a>
            </li>
            <li>
              <span class="post-date">2015-11-18</span>
              <a href="/blog/wunderline/">Wunderline を使ってみた</a>
            </li>
            <li>
              <span class="post-date">2015-04-08</span>
              <a href="/blog/media-capture-and-streams-web-audio-api/">Media Capture and Streams と Web Audio API で実現する録画・録音・ WAVファイルの生成</a>
            </li>
            <li>
              <span class="post-date">2015-03-18</span>
              <a href="/blog/web-speechi-api/">ブラウザのみで音声認識とテキスト読み上げを実現する Web Speech API</a>
            </li>
            <li>
              <span class="post-date">2015-03-09</span>
              <a href="/blog/thinking-toc/">TOC（目次メニュー）の実装方法について考えてみる</a>
            </li>
            <li>
              <span class="post-date">2015-02-21</span>
              <a href="/blog/web-audio-api-music/">HTML5 の Web Audio API で音楽してみる</a>
            </li>
            <li>
              <span class="post-date">2015-01-28</span>
              <a href="/blog/first-node-js/">Windows ではじめてみる Node.js</a>
            </li>
            <li>
              <span class="post-date">2015-01-17</span>
              <a href="/blog/angularjs/">MVWフロントエンド・フレームワーク、AngularJS をはじめてみる</a>
            </li>
            <li>
              <span class="post-date">2015-01-07</span>
              <a href="/blog/backbone-js/">Backbone.js ではじめるクライアントサイド MVC プログラミング</a>
            </li>
            <li>
              <span class="post-date">2014-12-23</span>
              <a href="/blog/pull-request-github/">Pull Request ではじめてみる！GitHub ソーシャルコーディング</a>
            </li>
            <li>
              <span class="post-date">2014-12-14</span>
              <a href="/blog/javascript-prototype/">JavaScript の prototype オブジェクト入門</a>
            </li>
            <li>
              <span class="post-date">2014-11-16</span>
              <a href="/blog/easy-code-prettify-doc/">マークダウンにも優しいライブデモ対応シンタックスハイライター jQuery プラグイン</a>
            </li>
            <li>
              <span class="post-date">2014-11-06</span>
              <a href="/blog/ex-code-prettify-v05/">Ex Code Prettify をバージョンアップしました【追記あり】</a>
            </li>
            <li>
              <span class="post-date">2014-10-26</span>
              <a href="/blog/sk8-bs-bordslide/">うちの小３男子がダウンレールでＢ／Ｓボードスライドを習得した</a>
            </li>
            <li>
              <span class="post-date">2014-10-05</span>
              <a href="/blog/twitter-cards/">WordPress 製のブログを Twitter カードに対応させてみた</a>
            </li>
            <li>
              <span class="post-date">2014-10-02</span>
              <a href="/blog/wordpress-ogp/">WordPress 製のブログを OGP(Open Graph Protocol) に対応させてみた</a>
            </li>
            <li>
              <span class="post-date">2014-09-29</span>
              <a href="/blog/fade-page-doc/">フェード効果で「ふわっ」とページ切替を行う jQuery プラグイン</a>
            </li>
            <li>
              <span class="post-date">2014-09-24</span>
              <a href="/blog/fade-page-change/">フェードイン／フェードアウトで「ふわっ」とページを切り替える【追記あり】</a>
            </li>
            <li>
              <span class="post-date">2014-09-23</span>
              <a href="/blog/fit-sidebar-doc/">レスポンシブ対応でサイドメニューを一定範囲で固定表示する jQuery プラグイン</a>
            </li>
            <li>
              <span class="post-date">2014-09-15</span>
              <a href="/blog/making-fg-chopper/">挑戦！自作フィギュア　ワンピース・チョッパー編</a>
            </li>
            <li>
              <span class="post-date">2014-07-24</span>
              <a href="/blog/sketch-akuma-cyoojin/">大人だけど全力で「７人の悪魔超人編」の絵を描いてみた</a>
            </li>
            <li>
              <span class="post-date">2014-07-15</span>
              <a href="/blog/making-fg-ramen-2/">挑戦！自作フィギュア　ラーメンマン編　その２</a>
            </li>
            <li>
              <span class="post-date">2014-07-11</span>
              <a href="/blog/making-fg-ramen-1/">挑戦！自作フィギュア　ラーメンマン編　その１</a>
            </li>
            <li>
              <span class="post-date">2014-06-24</span>
              <a href="/blog/fitbar-doc/">ツールバーをスクロール位置に応じ画面の上下にピタっと固定表示する jQuery プラグイン</a>
            </li>
            <li>
              <span class="post-date">2014-06-17</span>
              <a href="/blog/picasa-zoom-doc/">Picasa の写真の拡大／縮小を簡単に行うことできる jQuery プラグイン</a>
            </li>
            <li>
              <span class="post-date">2014-06-09</span>
              <a href="/blog/update-easy-social-buttons-and-social-info/">Easy Social Buttons と Social Info で Google+ の共有数を表示／取得できるようにしました</a>
            </li>
            <li>
              <span class="post-date">2014-06-09</span>
              <a href="/blog/making-fg-2/">挑戦！自作フィギュア　ウォーズマン編　その２</a>
            </li>
            <li>
              <span class="post-date">2014-06-09</span>
              <a href="/blog/dqy-excel/">システム管理者におすすめ！SQL の実行結果を手軽にエクセルに出力する方法</a>
            </li>
            <li>
              <span class="post-date">2014-06-05</span>
              <a href="/blog/mailto-doc/">mailto:リンク機能を利用しやすくする jQuery プラグイン</a>
            </li>
            <li>
              <span class="post-date">2014-05-28</span>
              <a href="/blog/ml-narisumasi-gmail-and-gas/">メーリングリストの「なりすまし」判定を Gmail と Google Apps Script で回避する方法</a>
            </li>
            <li>
              <span class="post-date">2014-05-25</span>
              <a href="/blog/making-fg-1/">挑戦！自作フィギュア　ウォーズマン編　その１</a>
            </li>
            <li>
              <span class="post-date">2014-05-18</span>
              <a href="/blog/find-fg-akiba-3/">第３回アキバ・フィギュア探しの旅</a>
            </li>
            <li>
              <span class="post-date">2014-03-25</span>
              <a href="/blog/easy-social-buttons-doc/">はてブ、Twitter、Facebook、Google+ のソーシャルボタンをシンプルに表示する jQuery プラグイン</a>
            </li>
            <li>
              <span class="post-date">2014-03-05</span>
              <a href="/blog/wordpress-openshift/">PaaS で動かす WordPress ＋ OpenShift 入門</a>
            </li>
            <li>
              <span class="post-date">2014-03-02</span>
              <a href="/blog/first-appengine-and-struts2/">Google App Engine for Java 入門 ＋ Struts2 デプロイ手順</a>
            </li>
            <li>
              <span class="post-date">2014-02-25</span>
              <a href="/blog/first-struts2/">2014年度版 Eclipse + Struts2 による Java Web アプリ開発入門</a>
            </li>
            <li>
              <span class="post-date">2014-02-06</span>
              <a href="/blog/social-info-doc/">はてブ、Twitter、Facebook、Google+ などのソーシャル系サービスの API を手軽に使用できるようにする jQuery プラグイン</a>
            </li>
            <li>
              <span class="post-date">2014-01-28</span>
              <a href="/blog/easy-feed-doc/">Google Feed API を手軽に利用できるようにする jQuery プラグイン</a>
            </li>
            <li>
              <span class="post-date">2014-01-04</span>
              <a href="/blog/find-fg-akiba-2/">第２回アキバ・フィギュア探しの旅</a>
            </li>
            <li>
              <span class="post-date">2013-12-17</span>
              <a href="/blog/sketch-kinnikuman/">大人だけど全力でキン肉マンの絵を描いてみた</a>
            </li>
            <li>
              <span class="post-date">2013-12-08</span>
              <a href="/blog/hash-contents-doc/">location.hash に応じタブ、アコーディオン、ツリービュー形式等でコンテンツを切り替える jQuery プラグイン</a>
            </li>
            <li>
              <span class="post-date">2013-12-03</span>
              <a href="/blog/keep-position-doc/">ページのスクロール位置を維持したままフォーム送信やページ切り替えができる jQuery プラグイン</a>
            </li>
            <li>
              <span class="post-date">2013-12-02</span>
              <a href="/blog/find-fg-akiba-1/">第１回アキバ・フィギュア探しの旅</a>
            </li>
            <li>
              <span class="post-date">2013-11-25</span>
              <a href="/blog/keyinfo-doc/">入力キーの種類を調べることができる jQuery プラグイン</a>
            </li>
            <li>
              <span class="post-date">2013-11-05</span>
              <a href="/blog/parse-url-doc/">URL の構成要素や QueryString の値を簡単に参照できるようにする jQuery プラグイン</a>
            </li>
            <li>
              <span class="post-date">2013-10-31</span>
              <a href="/blog/ex-scroll-doc/">スクロールイベントの開始／終了、方向を判別できる jQuery プラグイン</a>
            </li>
            <li>
              <span class="post-date">2013-09-23</span>
              <a href="/blog/ex-code-prettify-doc/">その場で編集／実行できるシンタックスハイライター jQuery プラグイン</a>
            </li>
            <li>
              <span class="post-date">2013-09-07</span>
              <a href="/blog/garamodel02/">ガラクタで重厚感のあるおもちゃを作ってみた ～その２～</a>
            </li>
            <li>
              <span class="post-date">2013-09-04</span>
              <a href="/blog/garamodel/">ガラクタで重厚感のあるおもちゃを作ってみた</a>
            </li>
            <li>
              <span class="post-date">2013-08-14</span>
              <a href="/blog/bootstrap-datetimepicker-ja/">Bootstrap ベースの日付／時刻ピッカーを日本語環境向けにカスタマイズした jQuery プラグイン</a>
            </li>
            <li>
              <span class="post-date">2013-08-12</span>
              <a href="/blog/jquery-hash-contents/">location.hash の値に応じ表示コンテンツを切り替える jQuery プラグインを作ってみた</a>
            </li>
            <li>
              <span class="post-date">2013-07-31</span>
              <a href="/blog/jquery-keep-position/">フォームデータ登録後もページスクロール位置を維持する方法を考えてみた</a>
            </li>
            <li>
              <span class="post-date">2013-07-03</span>
              <a href="/blog/jquery-sitekit/">Web サイト作成時に必要になりがちな機能をまとめた jQuery プラグイン</a>
            </li>
            <li>
              <span class="post-date">2013-04-24</span>
              <a href="/blog/jquery-ex-code-prettify/">Google Code Prettify のかゆいとこをなんとかする jQuery プラグインを書いてみた</a>
            </li>
            <li>
              <span class="post-date">2013-04-17</span>
              <a href="/blog/wordpress-markdown-behave_js/">WordPress の Markdown 環境を『Behave.js』でさらに快適にしてみる</a>
            </li>
            <li>
              <span class="post-date">2013-04-11</span>
              <a href="/blog/gmail-client/">Google 以外のメールアカウントで Gmail をメールクライアントとして使用する方法</a>
            </li>
            <li>
              <span class="post-date">2013-03-31</span>
              <a href="/blog/wordpress-my-setting-plugin-social/">WordPress のこまごま設定プラグインにソーシャルボタン設置機能、他を追加した</a>
            </li>
            <li>
              <span class="post-date">2013-03-25</span>
              <a href="/blog/wordpress-my-setting-plugin/">こまごました設定をまとめてできる WordPress プラグイン</a>
            </li>
            <li>
              <span class="post-date">2013-03-06</span>
              <a href="/blog/extablefilter/">汎用性重視のテーブルフィルタリング系 jQuery プラグイン</a>
            </li>
            <li>
              <span class="post-date">2013-02-27</span>
              <a href="/blog/jquery19-browser/">jQuery 1.9 で $.browser が使えなくなってしまった対策</a>
            </li>
            <li>
              <span class="post-date">2013-02-25</span>
              <a href="/blog/jquery-simple-table-filter/">jQuery によるシンプルなテーブルフィルタリング処理の実装を考えてみる</a>
            </li>
            <li>
              <span class="post-date">2013-02-25</span>
              <a href="/blog/first-post/">引っ越してきました</a>
            </li>
          </ul>
      </div>
    </div>
  </div>

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-4142215-12']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>



<script type="text/javascript" src="/theme/cyokodog/js/bundle.js?"></script>



  <script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js?ver=1.0'></script>
  <script type='text/javascript' src='/theme/cyokodog/index.jsx?'></script>

<script>
//document.querySelector('.searchForm')
$('.searchForm').on('submit' , function(){
  $('.searchForm__queryData').val('site:www.cyokodog.net ' + $('.searchForm__query').val());
});
</script>

<style>
.easy-social-buttons-container{
  margin-bottom:32px;
}

</style>

</body>
</html>


